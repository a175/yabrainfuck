# yabrainfuck
Yet another brainfuck implementation

## 説明
`BrainFuckVM`はBrainFuckの中間コードを動かす仮想マシンのクラス,
`BrainFuckCompilier`はテキストで書かれたコードを中間コードにコンパルするコンパイラです.
例えば, いわゆるHelloWordプログラム
`++++++++[>++++[>++>+++>+++>+<<<<-]>+>+>->>+[<]<-]>>.>---.+++++++..+++.>>.<-.<.+++.------.--------.>>+.>++.`
を走らせるには以下のように行います:
```
import brainfuck
bfvm= brainfuck.BrainFuckVM()
bfc = brainfuck.BrainFuckCompilier(bfvm)
codetorun = "++++++++[>++++[>++>+++>+++>+<<<<-]>+>+>->>+[<]<-]>>.>---.+++++++..+++.>>.<-.<.+++.------.--------.>>+.>++."
codelist = bfc.get_codelist_from_text(codetorun)
bfvm.set_codelist(codelist)
bfvm.run()
```
デフォルトのコンパイラ`BrainFuckCompilier`は,
カッコの釣り合いをチェックし数が合わなければ, `BrainFuckCompileError`を吐きます.
また,
文字コードが16進数で0xUVWXYZであるとき,
`5Z+4Y+3X+2W+V`を8で割った余りを求め,
それにより中間コードを作ります.
したがって, この値が等しい文字に置き換えても, 同じ中間コードを出力します.
なお, これは, 今の所ホワイトスペースや改行コードも例外ではありません.

例えば, Hello World
```
++++++++[>++++[>++>+++>+++>+<<<<-]>+>+>->>+[<]<-]>>.>---.+++++++..+++.>>.<-.<.+++.------.--------.>>+.>++.
```
は, ルーン文字を使って
```
ᚧᚯᛇᛏᛧᛯᚯᚻᛋᛚᛧᚧᚳᛇᛗᛦᛯᚯᛆᛏᛛᛯᚦᚻᛇᛓᛦᚧᚰᛄᛐᛤᚡᚭᚺᛇᛚᛧᚦᚵᛆᛒᛧᚣᚬᛅᛌᛝ᛭ᚦᚺᛊᛚᛩᚡᚵᚾᛏᛧᛯᚯᚻᛇᛛᛪᚪᚳᛇᛓᛢᛮᚮᚾᛌᛝᛪᚬᚶᛇᛓᛧᚢᚵᛁᛕᛝᚡᚩᚾᛉᛝᛩᚩᚵᛁᛕᛡᚢᚮᛆᛏᛞᛮᚧᚻᛊ
```
ともかけます.
例えば梵字を使って以下のように書くこともできます.
```
𑖁𑖕𑖡𑖁𑖕𑖝𑖁𑖕𑖥𑖀𑖉𑖝𑖩𑖉𑖙𑖨𑖉𑖕𑖨𑖉𑖕𑖡𑖈𑖕𑖡𑖁𑖔𑖝𑖮𑖎𑖦𑖮𑖋𑖛𑖨𑖉𑖜𑖩𑖈𑖗𑖨𑖈𑖕𑖥𑖆𑖓𑖦𑖃𑖏𑖠𑖀𑖐𑖜𑖫𑖋𑖟𑖬𑖉𑖝𑖩𑖉𑖝𑖩𑖉𑖘𑖤𑖉𑖕𑖡𑖄𑖔𑖠𑖄𑖎𑖟𑖬𑖎𑖤𑖁𑖕𑖝𑖬𑖋𑖗𑖫𑖋𑖗𑖫𑖄𑖗𑖣𑖃𑖗𑖣𑖃𑖗𑖟𑖄𑖔𑖜𑖁𑖌𑖜𑖩𑖉𑖘
```
また, 書体の異なるAを使った以下のものでも同じコードを吐きます.
```
𝐀𝛢𝐀𝛢Ą𝛢Ã𝒜Ā𝖠Ã𝐀𝛢𝐀Ā𝖠𝛢ÃΑÃ𝑨Ã𝖠𝛢𝐀𝛢𝖠𝛢 𝜜À𝜜ÅA𝝖𝐀ΑĄΑÅΑÂ𝑨Ā𝜜𝚨 𝙰ĂΑ𝖠𝔄Â𝙰Å𝙰𝔄𝐀𝛢Ą𝛢Ã𝒜Ã𝔄𝔄𝐀𝛢𝐀𝔸𝖠Α𝔄𝜜Å𝔄À𝔄𝛢𝐀𝛢𝔄𝙰Å𝙰Å𝙰Å𝔄ÅǺ𝙰Ǻ𝙰Å𝙰Å𝔄𝝖𝖠𝛢𝔄ΑĄ𝛢𝔄
```

これらは, `BrainFuckCompilier` のもつ, 
中間コードをプログラムに変換する`get_equivalent_code_text`を使えば,
以下のような感じで得られます.
```
import brainfuck
bfvm = brainfuck.BrainFuckVM()
bfc = brainfuck.BrainFuckCompilier(bfvm)
codetorun = "++++++++[>++++[>++>+++>+++>+<<<<-]>+>+>->>+[<]<-]>>.>---.+++++++..+++.>>.<-.<.+++.------.--------.>>+.>++."
codelist = bfc.get_codelist_from_text(codetorun)
candidates = [ chr(i) for i in range(0x16A0,0x16F0+1)]
translatedcode = bfc.get_equivalent_code_text(codelist,candidates,15)
print(translatedcode)
```
`candidates`は使用する文字のリストです.
この例では, ルーン文字をリストとして与えています.
`15`という部分を`0`にすると,
いつも`candidates`の先頭から使用する文字の候補を検索します.
それだと同じ文字が並ぶことが多いので,
1命令ごとに検索する場所を変えたいときには,
値を設定します.


